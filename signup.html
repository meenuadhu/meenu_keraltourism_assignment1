<!DOCTYPE html>
<html lang="en">
    <head>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
            <script src="https://kit.fontawesome.com/1c2c2462bf.js" crossorigin="anonymous"></script>
           
            <style>
                body {
    font-family: 'PT Sans', sans-serif;
}
.container{
    background-color:green;
}
h1{
    margin: 15px 0 25px;
    text-align: center;
    font-size: 30px;
}
input{
    color:#022255 !important;
}
input[type=email]:focus,
input[type=password]:focus,
input[type=text]:focus{
    box-shadow: 0 0 5px rgba(246, 8, 110,0.8);
    border: 1px solid rgba(246, 8, 110,0.8);
}
.container{
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}
.form-horizontal {
    width: 320px;
    background-color: #ffffff;
    padding: 25px 38px;
    border-radius: 12px;
    box-shadow: 2px 2px 15px rgba(0,0,0,0.5);
}
.control-label {
    text-align: left !important;
    padding-bottom: 4px;
}
.progress {
    height: 3px !important;
}
.form-group {
    margin-bottom: 10px;
}
.show-pass{
    position: absolute;
    top:5%;
    right: 8%;
}
.progress-bar-danger {
    background-color: #e90f10;
}
.progress-bar-warning{
    background-color: #ffad00;
}
.progress-bar-success{
    background-color: #02b502;
}
.login-btn{
    width: 180px !important;
    background-image: linear-gradient(to right,orange ,orange) !important;
    font-size: 18px;
    color: #fff;
    margin: 0 auto 5px;
    padding: 8px 0; 
}
.login-btn:hover{
    background-image: linear-gradient(to right,orange , rgba(247, 2, 43, 0.8)) !important;
    color: #fff !important;
}
.fa-eye{
    color: #022255;
    cursor: pointer;
}
.ex-account p a{
    color: orange;
    text-decoration: underline;
}
.fa-circle{
    font-size: 6px;  
}
.fa-check{
    color: #02b502;
} 
            </style>
        </head>
        
        <body>
            <div class="container">
                <form class="form-horizontal" id="validateForm" name="form1" >
                    <h1>Welcome</h1>
                    <fieldset>
                        <!-- Username input -->
                        <div class="form-group">
                            <label class="col-md-12 control-label" for="username">Username </label>
                            <div class="col-md-12">
                                <input id="username" name="textinput"  type="text" autocomplete="off" 
                                placeholder="Enter your username" class="form-control input-md" > 
                                <small ></small>
                            </div>
                         </div>


                            <!-- Phone NUmber -->
                            <div class="form-group">
                                <label class="col-md-12 control-label" for="textinput">Phone Number </label>
                                <div class="col-md-12">
                                    <input id="phone" name="phone"  type="phone" autocomplete="off" 
                                    placeholder="Enter your phone number" class="form-control input-md" onkeyup="validation()" > 
                               <small></small>
                                </div>
                              </div>

                        <!-- Email input-->
                        <div class="form-group">
                            <label class="col-md-12 control-label" for="Email">Email</label>
                            <div class="col-md-12">
                                <input id="email" name="email" type="text" autocomplete="off" 
                                placeholder="Enter your email address" class="form-control input-md" > 
                                <small></small>
                            </div>
                        </div>
                        
                        

                        <!-- Password input-->

                        
                        <div class="form-group">
                            <label class="col-md-12 control-label" for="password"> Password</label>
                            <div class="col-md-12">
                                <input id="password" class="form-control input-md" name="password" type="password" 
                                placeholder="Enter your password"  >
                                <span class="show-pass" onclick="toggle()">
                                  <i class="far fa-eye" onclick="myFunction(this)"></i>
                                </span>
                                <small></small>
                                <div id="popover-password"><p><span id="result"></span></p>
                                    <div class="progress">
                                        <div id="password-strength"  class="progress-bar" role="progressbar" 
                                            aria-valuenow="40"  aria-valuemin="0" aria-valuemax="100" style="width:0%">
                                        </div>
                                    </div>
                                    <ul class="list-unstyled">
                                        <li class="">
                                            <span class="low-upper-case">
                                                <i class="fas fa-circle" aria-hidden="true"></i>
                                                &nbsp;Lowercase &amp; Uppercase
                                            </span>
                                        </li>
                                        <li class="">
                                            <span class="one-number">
                                                <i class="fas fa-circle" aria-hidden="true"></i>
                                                &nbsp;Number (0-9)
                                            </span> 
                                        </li>
                                        <li class="">
                                            <span class="one-special-char">
                                                <i class="fas fa-circle" aria-hidden="true"></i>
                                                &nbsp;Special Character (!@#$%^&*)
                                            </span>
                                        </li>
                                        <li class="">
                                            <span class="eight-character">
                                                <i class="fas fa-circle" aria-hidden="true"></i>
                                                &nbsp;Atleast 8 Character
                                            </span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Confirm Password -->

                        <div class="form-group">
                            <label class="col-md-12 control-label" for="passwordinput">Confirm Password </label>
                            <div class="col-md-12">
                                <input id="confirm-password" class="form-control input-md" name="confirm-password" type="password" 
                                placeholder="Enter your password"  >
                                <small></small>
                                </div>
                            </div>
                        <!-- Button -->
                        
                         <div class="form-group">
                            <!-- <button  class="btn login-btn btn-block" onclick="phonenumber(document.form1.textinput)">Sign Up</button> -->

               <center> <input type= submit class="btn login-btn btn-block" value="Sign Up" ></a></center>
            </div>
            <!-- <input type=button onClick="location.href='index.html'"
            value='click here'> -->
                        <div class="ex-account text-center">
                            <p>Already have an account? LOGIN 
                                <a href="./login.html">here</a>
                            </p>
                            <div class="divider"></div>
                        </div>
                    </fieldset>
                </form>   
            </div>



         <script >
             
            const usernameEl = document.querySelector('#username');
            const phoneE1 = document.querySelector('#phone');
            const emailEl = document.querySelector('#email');
            const passwordEl = document.querySelector('#password');
            const confirmPasswordEl = document.querySelector('#confirm-password');
            const form = document.querySelector('#validateForm');


let state = false;
//let password = document.getElementById("password");
let passwordStrength = document.getElementById("password-strength");
let lowUpperCase = document.querySelector(".low-upper-case i");
let number = document.querySelector(".one-number i");
let specialChar = document.querySelector(".one-special-char i");
let eightChar = document.querySelector(".eight-character i");




// username
const checkUsername = () => {

    let valid = false;

    const min = 3,
        max = 25;

    const username = usernameEl.value.trim();

    if (!isRequired(username)) {
        showError(usernameEl, 'Username cannot be blank.');
    } else if (!isBetween(username.length, min, max)) {
        showError(usernameEl, `Username must be between ${min} and ${max} characters.`)
    } else {
        showSuccess(usernameEl);
        valid = true;
    }
    return valid;
};
//phone number
const checkphone=() => {
    let valid = false;
    // const phone =  /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
    const phone=phoneE1.value.trim();
    if (!isRequired(phone)) {
        showError(phoneE1, 'Phone number cannot be blank.');
    } else if (!isPhonevalid(phone)) {
        showError(phoneE1, 'Phone number must be in the form 222-055-9034, 321.789.4512 or 123 256 4587 ')
    } else {
        showSuccess(phoneE1);
        valid = true;
    }
    return valid;
};




//email
const checkEmail = () => {
    let valid = false;
    const email = emailEl.value.trim();
    if (!isRequired(email)) {
        showError(emailEl, 'Email cannot be blank.');
    } else if (!isEmailValid(email)) {
        showError(emailEl, 'Email is not valid.')
    } else {
        showSuccess(emailEl);
        valid = true;
    }
    return valid;
};


//password
const checkPassword = () => {
    let valid = false;


    const password = passwordEl.value.trim();

    if (!isRequired(password)) {
        showError(passwordEl, 'Password cannot be blank.');
    } else if (!isPasswordSecure(password)) {
        // showError(passwordEl, 'Password must has at least 8 characters that include at least 1 lowercase character, 1 uppercase characters, 1 number, and 1 special character in (!@#$%^&*)');
    } else {
        showSuccess(passwordEl);
        valid = true;
    }

    return valid;
};


////////////////////////////////////////////////////////////////////////////////////

password.addEventListener("keyup", function(){
    let pass = document.getElementById("password").value;
    checkStrength(pass);
});

function toggle(){
    if(state){
        document.getElementById("password").setAttribute("type","password");
        state = false;
    }else{
        document.getElementById("password").setAttribute("type","text")
        state = true;
    }
}

form.addEventListener('submit', e => {
    	e.preventDefault();
        
    	checkInputs();
    });



function myFunction(show){
    show.classList.toggle("fa-eye-slash");
}

function checkStrength(passwordEl) {
    let strength = 0;

    //If password contains both lower and uppercase characters
    if (passwordEl.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)) {
        strength += 1;
        lowUpperCase.classList.remove('fa-circle');
        lowUpperCase.classList.add('fa-check');
    } else {
        lowUpperCase.classList.add('fa-circle');
        lowUpperCase.classList.remove('fa-check');
    }
    //If it has numbers and characters
    if (passwordEl.match(/([0-9])/)) {
        strength += 1;
        number.classList.remove('fa-circle');
        number.classList.add('fa-check');
    } else {
        number.classList.add('fa-circle');
        number.classList.remove('fa-check');
    }
    //If it has one special character
    if (passwordEl.match(/([!,%,&,@,#,$,^,*,?,_,~])/)) {
        strength += 1;
        specialChar.classList.remove('fa-circle');
        specialChar.classList.add('fa-check');
    } else {
        specialChar.classList.add('fa-circle');
        specialChar.classList.remove('fa-check');
    }
    //If password is greater than 7
    if (passwordEl.length > 7) {
        strength += 1;
        eightChar.classList.remove('fa-circle');
        eightChar.classList.add('fa-check');
    } else {
        eightChar.classList.add('fa-circle');
        eightChar.classList.remove('fa-check');   
    }

    // If value is less than 2
    if (strength < 2) {
        passwordStrength.classList.remove('progress-bar-warning');
        passwordStrength.classList.remove('progress-bar-success');
        passwordStrength.classList.add('progress-bar-danger');
        passwordStrength.style = 'width: 10%';
    } else if (strength == 3) {
        passwordStrength.classList.remove('progress-bar-success');
        passwordStrength.classList.remove('progress-bar-danger');
        passwordStrength.classList.add('progress-bar-warning');
        passwordStrength.style = 'width: 60%';
    } else if (strength == 4) {
        passwordStrength.classList.remove('progress-bar-warning');
        passwordStrength.classList.remove('progress-bar-danger');
        passwordStrength.classList.add('progress-bar-success');
        passwordStrength.style = 'width: 100%';
    }
}

//confrim password

const checkConfirmPassword = () => {
    let valid = false;
    // check confirm password
    const confirmPassword = confirmPasswordEl.value.trim();
    const password = passwordEl.value.trim();

    if (!isRequired(confirmPassword)) {
        showError(confirmPasswordEl, 'Please enter the password again');
    } else if (password !== confirmPassword) {
        showError(confirmPasswordEl, 'The password does not match');
    } else {
        showSuccess(confirmPasswordEl);
        valid = true;
    }

    return valid;
};

const isEmailValid = (email) => {
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
};

const isPasswordSecure = (password) => {
    const re = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})");
    return re.test(password);
};

const isPhonevalid = (phone) => {
    const re = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;;
    return re.test(phone);
};

const isRequired = value => value === '' ? false : true;
const isBetween = (length, min, max) => length < min || length > max ? false : true;


const showError = (input, message) => {
    // get the form-field element
    const formField = input.parentElement;
    // add the error class
    formField.classList.remove('success');
    formField.classList.add('error');

    // show the error message
    const error = formField.querySelector('small');
    error.textContent = message;
};

const showSuccess = (input) => {
    // get the form-field element
    const formField = input.parentElement;

    // remove the error class
    formField.classList.remove('error');
    formField.classList.add('success');

    // hide the error message
    const error = formField.querySelector('small');
    error.textContent = '';
}


form.addEventListener('submit', function (e) {
    // prevent the form from submitting
    e.preventDefault();

    // validate fields
    let isUsernameValid = checkUsername(),
        isEmailValid = checkEmail(),
        isPasswordValid = checkPassword(),
        isConfirmPasswordValid = checkConfirmPassword();
        isPhonevalid = checkphone();

    let isFormValid = isUsernameValid &&
        isEmailValid &&
        isPasswordValid &&
        isConfirmPasswordValid &&
        isPhonevalid;

    // submit to the server if the form is valid
    if (isFormValid) {
       alert('Thank You for joining us.');
       location.href('./login.html');
    }
});


const debounce = (fn, delay = 500) => {
    let timeoutId;
    return (...args) => {
        // cancel the previous timer
        if (timeoutId) {
            clearTimeout(timeoutId);
        }
        // setup a new timer
        timeoutId = setTimeout(() => {
            fn.apply(null, args)
        }, delay);
    };
};

form.addEventListener('input', debounce(function (e) {
    switch (e.target.id) {
        case 'username':
            checkUsername();
            break;
        case 'email':
            checkEmail();
            break;
        case 'password':
            checkPassword();
            break;
        case 'confirm-password':
            checkConfirmPassword();
            break;
        case 'phone':
            checkphone();;
            break;
    }
}));
            </script>
        </body>
</html>